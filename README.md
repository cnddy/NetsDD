# 说明
网上的一键重装脚本大多数是启动一个debian安装程序,将运行修改好的
preseed.cfg(包括DD),虽然方便,但是增加了很多无用的东西,在我看来.

本文主要还是用打包好的rootfs实现秒启动,SSH持续运行.

原理很简单,挂载一个tmpfs用来换根,把rootfs里面的文件解压到tmpfs,然后用
systemctl switch-root,说到换根,简单说说,systemctl 的 switch-root 与 util-linux中的
switch_root区别,也没啥很大区别,后者在换根的时候会检查原始根对应的文件系统(tmpfs/ramfs),
前者不会,这就导致使用后者换根的时候报错(正常的linux都会装到硬盘上);逆向换根,
然而换根也是秒换的.

如果不是特别懒的人,建议尝试这个.

## DD系统部分
换根完成,ssh连接上后使用
wget -O- [dd包直连地址] >/dev/[你的硬盘,一般是sda/vda]
### 注意事项

* 如果DD包是压缩过的话请自行解压,
* 任何的网络故障都会导致失联(DD到一半),
* 有些操作涉及到内核模块,请在换根前加载这些模块,
* 换根后出现硬盘占用的情况,一般是swap没有关闭,或者还有进程读取硬盘的文件,请自行排查
